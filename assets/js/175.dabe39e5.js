(window.webpackJsonp=window.webpackJsonp||[]).push([[175],{835:function(t,a,s){"use strict";s.r(a);var r=s(48),o=Object(r.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"slack-連携"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#slack-連携","aria-hidden":"true"}},[t._v("#")]),t._v(" Slack 連携")]),t._v(" "),s("h2",{attrs:{id:"概要"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概要","aria-hidden":"true"}},[t._v("#")]),t._v(" 概要")]),t._v(" "),s("p",[t._v("GROWI では、 Slack 連携の方法として、1. GROWI bot と 2. Incoming Webhook の 2 種類の方法があります。")]),t._v(" "),s("h3",{attrs:{id:"_1-growi-bot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-growi-bot","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. GROWI bot")]),t._v(" "),s("p",[t._v("GROWI bot は GROWI 開発チーム が開発した Slack App の一つです。任意の Slack ワークスペースにインストールすること\nで、GROWI からの通知だけでなくチャットからの全文検索実行や会話まとめなど\n様々な機能を利用することができるようになります。\n提供されている GROWI bot は以下の 3 種類があります。")]),t._v(" "),s("h4",{attrs:{id:"official-bot-推奨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#official-bot-推奨","aria-hidden":"true"}},[t._v("#")]),t._v(" Official bot (推奨)")]),t._v(" "),s("p",[t._v("【概念図】\n"),s("img",{attrs:{src:"/assets/images/slack-bot-outline-official.png",alt:"diagram-for-official-bot"}})]),t._v(" "),s("p",[t._v("Official GROWI bot は GROWI 開発チーム が無償で提供・運用している GROWI bot です。\n"),s("a",{attrs:{href:"https://wsgrowi.slack.com/apps",target:"_blank",rel:"noopener noreferrer"}},[t._v("Slack app directory"),s("OutboundLink")],1),t._v(" で公開されており、どなたでも利用できます。")]),t._v(" "),s("h4",{attrs:{id:"custom-bot-without-proxy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#custom-bot-without-proxy","aria-hidden":"true"}},[t._v("#")]),t._v(" Custom bot without proxy")]),t._v(" "),s("p",[t._v("【概念図】\n"),s("img",{attrs:{src:"/assets/images/slack-bot-outline-custom-without-proxy.png",alt:"diagram-for-custom-bot-without-bot"}})]),t._v(" "),s("p",[t._v("Custom bot without proxy は 自身で Slack bot を作成し、お使いの GROWI と紐付けを行うことで、\nSlack から GROWI の 機能の一部を使用することができます。")]),t._v(" "),s("h4",{attrs:{id:"custom-bot-with-proxy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#custom-bot-with-proxy","aria-hidden":"true"}},[t._v("#")]),t._v(" Custom bot with proxy")]),t._v(" "),s("p",[t._v("【概念図】\n"),s("img",{attrs:{src:"/assets/images/slack-bot-outline-custom-with-proxy.png",alt:"diagram-for-custom-bot-with-proxy"}})]),t._v(" "),s("p",[t._v("Custom bot with proxy は 自身で Slack bot を作成し、proxy サーバーを立ち上げ・設定することで、\nOfficial bot と同様の手順で GROWI の機能の一部を使用することができます。")]),t._v(" "),s("h3",{attrs:{id:"_2-incoming-webhooks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-incoming-webhooks","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. Incoming Webhooks")]),t._v(" "),s("p",[t._v("Incoming Webhook も Slack 連携を行う手段の一つですが、GROWI bot とは異なり、Slack への通知に特化しています。\nチャットからの全文検索など GROWI bot にある機能の多くは使うことができませんが、その分簡単にセットアップできます。詳しくは"),s("RouterLink",{attrs:{to:"/ja/admin-guide/management-cookbook/external-notification.html#通知の種類-設定方法"}},[t._v("通知の種類/設定方法")]),t._v("をご覧ください。")],1),t._v(" "),s("h2",{attrs:{id:"各種-bot-の設定方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#各種-bot-の設定方法","aria-hidden":"true"}},[t._v("#")]),t._v(" 各種 Bot の設定方法")]),t._v(" "),s("h3",{attrs:{id:"official-bot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#official-bot","aria-hidden":"true"}},[t._v("#")]),t._v(" Official bot")]),t._v(" "),s("p",[t._v("設定方法は"),s("RouterLink",{attrs:{to:"/ja/admin-guide/management-cookbook/slack-integration/official-bot-settings.html"}},[t._v("こちら")]),t._v("をご覧ください。")],1),t._v(" "),s("h3",{attrs:{id:"custom-bot-without-proxy-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#custom-bot-without-proxy-2","aria-hidden":"true"}},[t._v("#")]),t._v(" Custom bot without proxy")]),t._v(" "),s("p",[t._v("設定方法は"),s("RouterLink",{attrs:{to:"/ja/admin-guide/management-cookbook/slack-integration/custom-bot-without-proxy-settings.html"}},[t._v("こちら")]),t._v("をご覧ください。")],1),t._v(" "),s("h3",{attrs:{id:"custom-bot-with-proxy-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#custom-bot-with-proxy-2","aria-hidden":"true"}},[t._v("#")]),t._v(" Custom bot with proxy")]),t._v(" "),s("p",[t._v("設定方法は"),s("RouterLink",{attrs:{to:"/ja/admin-guide/management-cookbook/slack-integration/custom-bot-with-proxy-settings.html"}},[t._v("こちら")]),t._v("をご覧ください。")],1),t._v(" "),s("h2",{attrs:{id:"接続テスト時のエラーログ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#接続テスト時のエラーログ","aria-hidden":"true"}},[t._v("#")]),t._v(" 接続テスト時のエラーログ")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("Channel_not_found")]),s("br"),t._v("\n指定したチャンネルに GROWI-Bot を招待していないか、間違ったチャンネルを入力した可能性があります。\nGROWI-Bot が Slack チャンネルに招待されていることを確認の上、適切にチャンネル名を入力してください。\n"),s("img",{attrs:{src:"/assets/images/slack-bot-test-channel-not-found.png",alt:"slack-bot-test-channel-not-found"}})])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Proxy URL is not registered")]),s("br"),t._v("\nProxy URL が設定されていない可能性があります。Proxy URL を入力してください。\n"),s("img",{attrs:{src:"/assets/images/slack-bot-errors-proxy-url-is-not-registered.png",alt:"slack-bot-errors-proxy-url-is-not-registered"}})])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Request failed with status code 400")]),s("br"),t._v("\nSlack ワークスペースで "),s("code",[t._v("/growi register")]),t._v(" で Proxy に情報を登録せずに Test ボタンをクリックした可能性があります。\nSlack ワークスペースで "),s("code",[t._v("/growi register")]),t._v(" を実行し、必要な情報を Proxy に登録してください。\n"),s("img",{attrs:{src:"/assets/images/slack-bot-errors-400.png",alt:"slack-bot-errors-400"}})])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Request failed with status code 500")]),s("br"),t._v("\nすでに Access Token を登録された後、Access Token を再発行してテストを実行した可能性があります。\n"),s("RouterLink",{attrs:{to:"/ja/admin-guide/management-cookbook/slack-integration/#接続中の-growi-を確認する"}},[t._v("接続中の GROWI を確認する")]),t._v("を参照して、\n現在どの GROWI App と連携しているのかを確認してください。\n確認ができたら、"),s("RouterLink",{attrs:{to:"/ja/admin-guide/management-cookbook/slack-integration/#slack-ワークスペースと-growi-app-との連携を解除する"}},[t._v("Slack ワークスペースと GROWI App との連携を解除する")]),t._v("\nを参照し、GROWI App との連携を解除してください。\n連携を解除することができたら、再度登録し直してください。\n"),s("img",{attrs:{src:"/assets/images/slack-bot-errors-500.png",alt:"slack-bot-errors-500"}})],1)]),t._v(" "),s("li",[s("p",[s("strong",[t._v("The scopes is not appropriate")]),s("br"),t._v("\nSlack App を作成した際に設定する Scope が正しくない可能性があります。\n作成した Slack App の OAuth & Permissions から Scope の確認をしてください。\n必要な Scope は "),s("strong",[t._v("team:read")]),t._v(", "),s("strong",[t._v("chat:write")]),t._v(", "),s("strong",[t._v("command")]),t._v(" です。\n"),s("img",{attrs:{src:"/assets/images/slack-bot-errors-scopes-not-appropriate.png",alt:"slack-bot-errors-scopes-not-appropriate"}})])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Cannot read property 'includes' of undefined")]),s("br"),t._v("\nSigning Secret や Bot User OAuth Token などの情報が登録されていない可能性があります。正しい値を入力してください。\n"),s("img",{attrs:{src:"/assets/images/slack-bot-errors-includes-of-undefined.png",alt:"slack-bot-errors-includes-of-undefined"}})])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("invalid_auth")]),s("br"),t._v("\nSigning Secret や Bot User OAuth Token の値が間違っている可能性があります。正しい値を入力してください。\n"),s("img",{attrs:{src:"/assets/images/slack-bot-errors-invalid-auth.png",alt:"slack-bot-errors-invalid-auth"}})])])]),t._v(" "),s("h2",{attrs:{id:"growi-bot-でできること"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#growi-bot-でできること","aria-hidden":"true"}},[t._v("#")]),t._v(" GROWI bot でできること")]),t._v(" "),s("h3",{attrs:{id:"ヘルプコマンド"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ヘルプコマンド","aria-hidden":"true"}},[t._v("#")]),t._v(" ヘルプコマンド")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("/growi help")]),t._v(" を入力すると GROWI bot で使うことができる、コマンド一覧が表示されます。\n"),s("img",{attrs:{src:"/assets/images/growi-help.gif",alt:"HackMD Demo"}})])]),t._v(" "),s("h3",{attrs:{id:"ページの作成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ページの作成","aria-hidden":"true"}},[t._v("#")]),t._v(" ページの作成")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("/growi create")]),t._v(" を入力すると GROWI 内に新規ページが作成されます。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/growi-create.gif",alt:"HackMD Demo"}})]),t._v(" "),s("h3",{attrs:{id:"ワークスペース内の全文検索"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ワークスペース内の全文検索","aria-hidden":"true"}},[t._v("#")]),t._v(" ワークスペース内の全文検索")]),t._v(" "),s("ol",[s("li",[s("p",[s("code",[t._v("/growi search [キーワード]")]),t._v(" を入力すると検索結果が表示されます。")]),t._v(" "),s("ul",[s("li",[t._v("例: "),s("code",[t._v("/growi search example")]),t._v(" "),s("img",{attrs:{src:"/assets/images/slack-bot-full-text-search-display-result-command.png",alt:"slack-bot-full-text-search-display-result-command"}})]),t._v(" "),s("li",[t._v("検索結果\n"),s("img",{attrs:{src:"/assets/images/slack-bot-full-text-search-display-result.png",alt:"slack-bot-full-text-search-display-result"}})]),t._v(" "),s("li",[s("strong",[t._v("Next")]),t._v(" ボタンをクリックすると、次の検索結果を表示します。\n"),s("img",{attrs:{src:"/assets/images/slack-bot-full-text-search-click-next.png",alt:"slack-bot-full-text-search-click-next"}})]),t._v(" "),s("li",[s("strong",[t._v("Share")]),t._v(" ボタンをクリックすると、チャンネル内に共有されます。\n"),s("img",{attrs:{src:"/assets/images/slack-bot-full-text-search-click-share.png",alt:"slack-bot-full-text-search-click-share"}})])])]),t._v(" "),s("li",[s("p",[t._v("Slack ワークスペースを複数の GROWI に登録している場合、複数の GROWI から横断検索することができます。(※ Bot type が Official bot と Custom bot with proxy の場合のみ使えます。)")]),t._v(" "),s("ul",[s("li",[t._v("例: "),s("code",[t._v("/growi search example")]),t._v(" "),s("img",{attrs:{src:"/assets/images/slack-bot-full-text-search-display-result-command.png",alt:"slack-bot-full-text-search-display-result-command"}})]),t._v(" "),s("li",[t._v("検索結果\n"),s("img",{attrs:{src:"/assets/images/slack-bot-search-multi-growi.png",alt:"slack-bot-search-multi-growi"}})])])])]),t._v(" "),s("h3",{attrs:{id:"slack-チャンネル内の会話からページを作成する-alpha"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#slack-チャンネル内の会話からページを作成する-alpha","aria-hidden":"true"}},[t._v("#")]),t._v(" Slack チャンネル内の会話からページを作成する (Alpha)")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("/growi togetter")]),t._v(" を入力します。")]),t._v(" "),s("li",[s("code",[t._v("Oldest datetime")]),t._v(" にページに使用したいメッセージで最も古いものの時刻を入力します。")]),t._v(" "),s("li",[s("code",[t._v("Newest datetime")]),t._v(" にページに使用したいメッセージで最も新しいものの時刻を入力します。")]),t._v(" "),s("li",[t._v("最後に "),s("code",[t._v("Page path")]),t._v(" にページの作成パスを入力し、"),s("code",[t._v("Create page")]),t._v(" します。 "),s("code",[t._v("Oldest datetime")]),t._v(" から "),s("code",[t._v("Newest datetime")]),t._v(" の間の会話が作成されるページに反映されます。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/growi-togetter.gif",alt:"HackMD Demo"}})]),t._v(" "),s("h3",{attrs:{id:"接続中の-growi-を確認する"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#接続中の-growi-を確認する","aria-hidden":"true"}},[t._v("#")]),t._v(" 接続中の GROWI を確認する")]),t._v(" "),s("p",[s("code",[t._v("/growi status")]),t._v(" と入力することで、Slack ワークスペースと連携している GROWI を確認することができます。(※ Bot type が Official bot と Custom bot with proxy の場合のみ使えます。)\n"),s("img",{attrs:{src:"/assets/images/slack-bot-growi-status.png",alt:"slack-bot-growi-status"}})]),t._v(" "),s("h3",{attrs:{id:"slack-ワークスペースと-growi-app-との連携を解除する"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#slack-ワークスペースと-growi-app-との連携を解除する","aria-hidden":"true"}},[t._v("#")]),t._v(" Slack ワークスペースと GROWI App との連携を解除する")]),t._v(" "),s("ol",[s("li",[s("p",[s("code",[t._v("/growi unregister [連携解除したい GROWI App の URL1] [連携解除したい GROWI App の URL2] ...")]),t._v(" と入力するとモーダルが表示されます。(※ Bot type が Official bot と Custom bot with proxy の場合のみ使えます。)")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("入力例: "),s("code",[t._v("growi unregister http://example.com http://growi.jp")]),t._v(" "),s("img",{attrs:{src:"/assets/images/slack-bot-unregister-input-eg.png",alt:"slack-bot-unregister-input-eg"}})])]),t._v(" "),s("li",[s("p",[t._v("表示されるモーダル\n"),s("img",{attrs:{src:"/assets/images/slack-bot-unregister-modal.png",alt:"slack-bot-unregister-modal"}})])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Submit")]),t._v(" ボタンをクリックします。")])]),t._v(" "),s("li",[s("p",[t._v("以下のように表示されたら、連携解除が完了しています。\n"),s("img",{attrs:{src:"/assets/images/slack-bot-unregister-completed.png",alt:"slack-bot-unregister-completed"}})])])]),t._v(" "),s("h2",{attrs:{id:"アイコン"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#アイコン","aria-hidden":"true"}},[t._v("#")]),t._v(" アイコン")]),t._v(" "),s("p",[t._v("よろしければ、以下のイラストを Custom bot 用のアイコンにお使いください。\n"),s("img",{attrs:{src:"/assets/images/growikun-icon-2000_2000.png",alt:"growikun-icon-2000_2000"}})]),t._v(" "),s("h2",{attrs:{id:"incoming-webhook-設定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#incoming-webhook-設定","aria-hidden":"true"}},[t._v("#")]),t._v(" Incoming webhook 設定")]),t._v(" "),s("p",[t._v("TODO: GW-5372 「Slack/Mattermost への通知」の内容を適切なタイトルの下に移動させる\nIncoming Webhook による連携は v4.2 系までの推奨機能でしたが、v4.3 系以降は前述の GROWI bot による連携を推奨しています。")]),t._v(" "),s("p",[t._v("通知を行う Slack ワークスペースを設定します。")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("管理画面のセキュリティ設定ページ(/admin/notification)にアクセスします。")])]),t._v(" "),s("li",[s("p",[t._v("Slack Incoming Webhooks 設定の必要事項を入力し、更新ボタンを押します。")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Webhook URL")]),s("br"),t._v(" "),s("a",{attrs:{href:"https://slack.com/services/new/incoming-webhook",target:"_blank",rel:"noopener noreferrer"}},[t._v("Incoming Webhooks"),s("OutboundLink")],1),t._v(" で取得できます。")])])])]),t._v(" "),s("h3",{attrs:{id:"設定が反映されているかの確認"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#設定が反映されているかの確認","aria-hidden":"true"}},[t._v("#")]),t._v(" 設定が反映されているかの確認")]),t._v(" "),s("p",[t._v("上記の設定後、ページの編集モード画面に Slack 通知フォームが追加されます。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/slack1.png",alt:"slack1"}})]),t._v(" "),s("p",[t._v("ページの保存・更新時に 入力したチャンネルに Slack 通知が届きます。"),s("br"),t._v("\nこの方法で通知を行うことを GROWI では "),s("strong",[t._v("User Trigger Notification")]),t._v(" といいます。")]),t._v(" "),s("p",[t._v("User Trigger Notification の設定方法は"),s("RouterLink",{attrs:{to:"/ja/admin-guide/management-cookbook/external-notification.html#user-trigger-notification-設定"}},[t._v("こちら")]),t._v("を参照してください。")],1)])},[],!1,null,null,null);a.default=o.exports}}]);