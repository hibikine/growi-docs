(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{731:function(t,s,e){"use strict";e.r(s);var a=e(48),o=Object(a.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"custom-bot-with-proxy-settings"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#custom-bot-with-proxy-settings","aria-hidden":"true"}},[t._v("#")]),t._v(" Custom bot with proxy settings")]),t._v(" "),e("p",[t._v("【Diagram】\n"),e("img",{attrs:{src:"/assets/images/slack-bot-outline-custom-with-proxy.png",alt:"diagram-for-custom-bot-with-proxy"}})]),t._v(" "),e("p",[t._v("To deploy a custom bot without proxy in your Slack workspace,\nyou need to create and edit a Slack app.\nThe steps are as follows.")]),t._v(" "),e("h2",{attrs:{id:"before-creating-custom-bot-with-proxy"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#before-creating-custom-bot-with-proxy","aria-hidden":"true"}},[t._v("#")]),t._v(" Before creating Custom bot with proxy")]),t._v(" "),e("ol",[e("li",[t._v("Create a new file "),e("code",[t._v(".env.development.local")]),t._v(" under "),e("code",[t._v("packages/slackbot-proxy")]),t._v(".")]),t._v(" "),e("li",[t._v("Please input any environment variable "),e("code",[t._v("SERVER_URI")]),t._v(" to the created file above.")])]),t._v(" "),e("p",[t._v("e.g. "),e("code",[t._v("SERVER_URI=http://localhost:8080")])]),t._v(" "),e("ol",[e("li",[e("p",[t._v("Start both the GROWI main server and the proxy server("),e("code",[t._v("slackbot-proxy")]),t._v(")."),e("br"),t._v("\nYou can start the proxy server with "),e("code",[t._v("yarn")]),t._v(" and "),e("code",[t._v("yarn dev")]),t._v(" commands.")])]),t._v(" "),e("li",[e("p",[t._v("Select "),e("strong",[t._v("Custom bot with proxy")]),t._v(" from the Slack Integration section\nof the admin panel.")])])]),t._v(" "),e("p",[e("img",{attrs:{src:"/assets/images/slack-bot-selecting-custom-bot-with-proxy.png",alt:"slack-bot-selecting-custom-bot-with-proxy"}})]),t._v(" "),e("h2",{attrs:{id:"create-custom-bot-with-proxy"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-custom-bot-with-proxy","aria-hidden":"true"}},[t._v("#")]),t._v(" Create Custom bot with proxy")]),t._v(" "),e("ol",[e("li",[t._v("Go to the "),e("a",{attrs:{href:"https://api.slack.com/apps",target:"_blank",rel:"noopener noreferrer"}},[t._v("App Page"),e("OutboundLink")],1),t._v(" of the Slack API and click\n"),e("strong",[t._v("Create New App")]),t._v(" button.")])]),t._v(" "),e("p",[e("img",{attrs:{src:"/assets/images/slack-custom-bot1.png",alt:"slack-custom-bot1"}})]),t._v(" "),e("ol",[e("li",[e("p",[t._v("In the "),e("strong",[t._v("Create a Slack App")]),t._v(" section, ① input the name of your app in the\n"),e("strong",[t._v("App Name")]),t._v(" field and ② select the workspace where you want to add the GROWI\nbots in the "),e("strong",[t._v("Development Slack Workspace")]),t._v(".")])]),t._v(" "),e("li",[e("p",[t._v("Click the "),e("strong",[t._v("Create App")]),t._v(" button.")])])]),t._v(" "),e("p",[e("img",{attrs:{src:"/assets/images/slack-custom-bot2.png",alt:"slack-custom-bot2"}})]),t._v(" "),e("h2",{attrs:{id:"set-custom-bot-with-proxy-scopes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#set-custom-bot-with-proxy-scopes","aria-hidden":"true"}},[t._v("#")]),t._v(" Set Custom bot with proxy Scopes")]),t._v(" "),e("ol",[e("li",[t._v("In the Slack App you created, go to "),e("strong",[t._v("Features")]),t._v(" and click "),e("strong",[t._v("OAuth & Permissions")]),t._v(".\n"),e("img",{attrs:{src:"/assets/images/slack-bot-oauth-and-permissions-introduction.png",alt:"slack-bot-oauth-and-permissions-introduction"}})]),t._v(" "),e("li",[t._v("Click the "),e("strong",[t._v("Add an OAuth Scope")]),t._v(" button.\n"),e("img",{attrs:{src:"/assets//images/slack-bot-scope-add-oauth-click.png",alt:"slack-bot-scope-add-oauth-click"}})]),t._v(" "),e("li",[t._v("Select "),e("strong",[t._v("commands")]),t._v(", "),e("strong",[t._v("chat: write")]),t._v(" and "),e("strong",[t._v("team:read")]),t._v("."),e("br"),t._v("\nWhen the following OAuth Scope is displayed, the scope setting will be completed.\n"),e("img",{attrs:{src:"/assets//images/slack-bot-scope-selected.png",alt:"slack-bot-scope-selected"}})])]),t._v(" "),e("h2",{attrs:{id:"request-url-settings"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-url-settings","aria-hidden":"true"}},[t._v("#")]),t._v(" Request URL settings")]),t._v(" "),e("h3",{attrs:{id:"interactivity-shortcuts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#interactivity-shortcuts","aria-hidden":"true"}},[t._v("#")]),t._v(" Interactivity & Shortcuts")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("In the Slack App you created, go to "),e("strong",[t._v("Features")]),t._v(" and click "),e("strong",[t._v("Interactivity Shortcuts")]),t._v(".\n"),e("img",{attrs:{src:"/assets/images/slack-bot-interactivity-shortcuts-introduction.png",alt:"slack-bot-interactivity-shortcuts-introduction"}})])]),t._v(" "),e("li",[e("p",[t._v("Turn on the button on the right side of "),e("strong",[t._v("Interactivity")]),t._v(".\n"),e("img",{attrs:{src:"/assets/images/slack-bot-interactivity-shortcuts-enable-button.png",alt:"slack-bot-interactivity-shortcuts-enable-button"}})])]),t._v(" "),e("li",[e("p",[t._v("Input the Request URL as follows.")]),t._v(" "),e("ul",[e("li",[t._v("https:// your GROWI domain /_api/v3/slack-integration/interactions\n"),e("ul",[e("li",[t._v("e.g. "),e("strong",[e("a",{attrs:{href:"https://example.com/_api/v3/slack-integration/interactions",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://example.com/_api/v3/slack-integration/interactions"),e("OutboundLink")],1)])])])])]),t._v(" "),e("p",[e("img",{attrs:{src:"/assets/images/slack-bot-interactivity-shortcuts-creation.png",alt:"slack-bot-interactivity-shortcuts-creation"}})])]),t._v(" "),e("li",[e("p",[t._v("When the Request URL has been correctly entered, click the "),e("strong",[t._v("Save Changes")]),t._v(" button.")])])]),t._v(" "),e("h3",{attrs:{id:"slash-commands"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#slash-commands","aria-hidden":"true"}},[t._v("#")]),t._v(" Slash Commands")]),t._v(" "),e("ol",[e("li",[t._v("In the Slack App you created, go to "),e("strong",[t._v("Features")]),t._v(" and click "),e("strong",[t._v("Slash Commands")]),t._v(".")])]),t._v(" "),e("ol",[e("li",[e("p",[t._v("Click the "),e("strong",[t._v("Create New Command")]),t._v(" button.")]),t._v(" "),e("p",[e("img",{attrs:{src:"/assets/images/slash-commands-create-new-command.png",alt:"slash-commands-create-new-command"}})]),t._v(" "),e("ul",[e("li",[t._v("Input "),e("code",[t._v("/growi")]),t._v(" for Command.")]),t._v(" "),e("li",[t._v("For RequestURL, input "),e("code",[t._v("https://example.com/_api/v3/slack-integration/commands")]),t._v(".")]),t._v(" "),e("li",[t._v("Short Description is also required, so please input an appropriate description.")]),t._v(" "),e("li",[t._v("The Usage Hint is optional, so please input it accordingly.")]),t._v(" "),e("li",[t._v("The Escape channels, users, and links sent to your app is optional,\nso input it accordingly.")]),t._v(" "),e("li",[t._v("When you are done, click "),e("strong",[t._v("Save")]),t._v(" button.")])]),t._v(" "),e("p",[e("img",{attrs:{src:"/assets/images/slash-commands-create.png",alt:"slash-commands-create"}})])])]),t._v(" "),e("h2",{attrs:{id:"redirect-url-setting"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redirect-url-setting","aria-hidden":"true"}},[t._v("#")]),t._v(" Redirect URL setting")]),t._v(" "),e("h3",{attrs:{id:"oauth-permissions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#oauth-permissions","aria-hidden":"true"}},[t._v("#")]),t._v(" OAuth & Permissions")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("In the Slack App you created, go to "),e("strong",[t._v("Features")]),t._v(" and click "),e("strong",[t._v("OAuth & Permissions")]),t._v(".")])]),t._v(" "),e("li",[e("p",[t._v("Click on the "),e("strong",[t._v("Add New Redirect URL")]),t._v(" button of "),e("strong",[t._v("Redirect URLs")]),t._v(".\n"),e("img",{attrs:{src:"/assets/images/slack-bot-auth-and-permisions1.png",alt:"slash-commands-introduction"}})])]),t._v(" "),e("li",[e("p",[t._v("when displayed input form, please input "),e("code",[t._v("https://{your proxy domain name}/slack/oauth_redirect")]),t._v(".")]),t._v(" "),e("ul",[e("li",[t._v("e.g. "),e("code",[t._v("https://example.com/slack/oauth_redirect")])])]),t._v(" "),e("p",[e("img",{attrs:{src:"/assets/images/slack-bot-auth-and-permisions2.png",alt:"slash-commands-introduction"}})])]),t._v(" "),e("li",[e("p",[t._v("Click on the "),e("strong",[t._v("Add")]),t._v(" button.")])]),t._v(" "),e("li",[e("p",[t._v("Save the URL by clicking on the "),e("strong",[t._v("Save URLs")]),t._v(" button.")])])]),t._v(" "),e("h2",{attrs:{id:"install-custom-bot-with-proxy-in-your-slack-workspace"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-custom-bot-with-proxy-in-your-slack-workspace","aria-hidden":"true"}},[t._v("#")]),t._v(" Install Custom bot with proxy in your Slack workspace")]),t._v(" "),e("ol",[e("li",[t._v("In the Slack App you have just created, go to "),e("strong",[t._v("Settings")]),t._v(" and click "),e("strong",[t._v("Manage distribution")]),t._v(".")]),t._v(" "),e("li",[t._v("Click the "),e("strong",[t._v("Add to Slack")]),t._v(" button on the "),e("strong",[t._v("Embeddable Slack Button")]),t._v(".")]),t._v(" "),e("li",[t._v("In the destination screen, click Allow.\n"),e("img",{attrs:{src:"/assets/images/slack-bot-install-your-app-transition-destination.png",alt:"slack-bot-install-your-app-transition-destination"}})]),t._v(" "),e("li",[t._v("If the message "),e("strong",[t._v("Congratulations!")]),t._v(" is displayed, the installation is complete.")]),t._v(" "),e("li",[t._v("invite the GROWI bot to the channel you want to use by using @example.\n"),e("img",{attrs:{src:"/assets/images/slack-bot-install-to-workspace-joined-bot.png",alt:"slack-bot-install-to-workspace-joined-bot"}}),t._v(" "),e("img",{attrs:{src:"/assets/images/slack-bot-install-your-app-introduction-to-channel.png",alt:"slack-bot-install-your-app-introduction-to-channel"}})])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("If the message "),e("code",[t._v("Illegal state, try it again.")]),t._v(" is displayed, press "),e("strong",[t._v("Go to install page")]),t._v(", and then click "),e("strong",[t._v("Add to Slack")]),t._v(" button to install again.")])]),t._v(" "),e("h2",{attrs:{id:"register-custom-bot-with-proxy-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#register-custom-bot-with-proxy-service","aria-hidden":"true"}},[t._v("#")]),t._v(" Register Custom bot with proxy Service")]),t._v(" "),e("ol",[e("li",[t._v("Open the registration for the GROWI Custom Bot with proxy service.\nYou will see that two access tokens have been generated for the various tokens in the "),e("strong",[t._v("Generate Access Token")]),t._v(" section. Access tokens can be reissued if necessary.")]),t._v(" "),e("li",[t._v("On Slack, type "),e("code",[t._v("/growi register")]),t._v(".\n"),e("img",{attrs:{src:"/assets/images/slack-bot-growi-register.png",alt:"slack-bot-growi-register"}}),t._v(" "),e("img",{attrs:{src:"/assets/images/slack-bot-register-modal.png",alt:"slack-bot-add-workspace"}})]),t._v(" "),e("li",[t._v("Save the URL of the target GROWI in the GROWI URL of the displayed modal.")]),t._v(" "),e("li",[t._v("Enter the Access Token Proxy to GROWI and Access Token GROWI to Proxy issued above, and click the "),e("strong",[t._v("Submit")]),t._v(" button.")])]),t._v(" "),e("p",[e("img",{attrs:{src:"/assets/images/slack-bot-update-proxy-url.png",alt:"slack-bot-update-proxy-url"}})]),t._v(" "),e("p",[t._v("If successful, the URL of the proxy server will be displayed.")]),t._v(" "),e("p",[e("img",{attrs:{src:"/assets/images/slack-bot-input-proxy-url.png",alt:"slack-bot-input-proxy-url"}})]),t._v(" "),e("p",[t._v("Enter the URL of the proxy server you obtained above into the Proxy URL of "),e("strong",[t._v("Custom Bot With Proxy Integration")]),t._v(" and update it.")]),t._v(" "),e("h2",{attrs:{id:"run-connectivity-test-of-custom-bot-with-proxy"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#run-connectivity-test-of-custom-bot-with-proxy","aria-hidden":"true"}},[t._v("#")]),t._v(" Run connectivity test of Custom bot with proxy")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("Click "),e("strong",[t._v("Test connection")]),t._v(" and input the Slack channel to which invited GROWI-Bot.\n"),e("img",{attrs:{src:"/assets/images/slack-bot-test-introduction.png",alt:"slack-bot-test-introduction"}})])]),t._v(" "),e("li",[e("p",[t._v("Click on the "),e("strong",[t._v("Test")]),t._v(" button.")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("In case of success\n"),e("strong",[t._v("Successfully sent to Slack workspace.")]),t._v(" will be displayed at Logs.\nGreen checkmarks will appear in red circles. Check the channel to\nwhich you invited GROWI-Bot.")]),t._v(" "),e("ul",[e("li",[t._v("GROWI side\n"),e("img",{attrs:{src:"/assets/images/slack-bot-test-success.png",alt:"slack-bot-test-success"}})]),t._v(" "),e("li",[t._v("Slack side\n"),e("img",{attrs:{src:"/assets/images/slack-bot-test-success-at-slack-app.png",alt:"slack-bot-test-success-at-slack-app"}})])])]),t._v(" "),e("li",[e("p",[t._v("In case of failure"),e("br"),t._v("\nSee "),e("RouterLink",{attrs:{to:"/en/admin-guide/management-cookbook/slack-integration/#error-logs-for-connectivity-test"}},[t._v("Error logs for connectivity test")])],1),t._v(" "),e("p",[t._v("Once you are all set up, see "),e("RouterLink",{attrs:{to:"/en/admin-guide/management-cookbook/slack-integration/#check-the-connected-growi"}},[t._v("what you can do with a GROWI-bot")])],1)])])])])])},[],!1,null,null,null);s.default=o.exports}}]);