(window.webpackJsonp=window.webpackJsonp||[]).push([[177],{837:function(t,s,a){"use strict";a.r(s);var o=a(48),e=Object(o.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"custom-bot-without-proxy-設定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-bot-without-proxy-設定","aria-hidden":"true"}},[t._v("#")]),t._v(" Custom bot without proxy 設定")]),t._v(" "),a("p",[t._v("【概念図】\n"),a("img",{attrs:{src:"/assets/images/slack-bot-outline-custom-without-proxy.png",alt:"diagram-for-custom-bot-without-bot"}})]),t._v(" "),a("p",[t._v("Custom bot without proxy を Slack のワークスペースに導入するには、Slack アプリを作成・編集する必要があります。手順は以下の通りです。")]),t._v(" "),a("h2",{attrs:{id:"custom-bot-without-proxy-を作成する前に"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-bot-without-proxy-を作成する前に","aria-hidden":"true"}},[t._v("#")]),t._v(" Custom bot without proxy を作成する前に")]),t._v(" "),a("p",[t._v("GROWI 本体サーバーを立ち上げてください。")]),t._v(" "),a("h2",{attrs:{id:"bot-type-の選択"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bot-type-の選択","aria-hidden":"true"}},[t._v("#")]),t._v(" Bot type の選択")]),t._v(" "),a("p",[t._v("管理画面の Slack 連携 にて "),a("strong",[t._v("Custom bot without proxy")]),t._v(" を選択してください。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/assets/images/slack-bot-selecting-custom-bot-without-proxy.png",alt:"slack-bot-selecting-custom-bot-without-proxy"}})]),t._v(" "),a("h2",{attrs:{id:"slack-app-を作成する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#slack-app-を作成する","aria-hidden":"true"}},[t._v("#")]),t._v(" Slack app を作成する")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Slack API の"),a("a",{attrs:{href:"https://api.slack.com/apps",target:"_blank",rel:"noopener noreferrer"}},[t._v("アプリページ"),a("OutboundLink")],1),t._v("に移動し、「Create New App」をクリックします。\n"),a("img",{attrs:{src:"/assets/images/slack-custom-bot1.png",alt:"slack-custom-bot1"}})])]),t._v(" "),a("li",[a("p",[t._v("「Create a Slack App」の ①「App Name」にはアプリの名前を、②「Development Slack Workspace」には\nGROWI bot を追加したいワークスペースを選択します。")])]),t._v(" "),a("li",[a("p",[t._v("「Create App」をクリックします。\n"),a("img",{attrs:{src:"/assets/images/slack-custom-bot2.png",alt:"slack-custom-bot2"}})])])]),t._v(" "),a("h2",{attrs:{id:"スコープを設定する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#スコープを設定する","aria-hidden":"true"}},[t._v("#")]),t._v(" スコープを設定する")]),t._v(" "),a("ol",[a("li",[t._v("作成した Slack App の "),a("strong",[t._v("Features")]),t._v(" から "),a("strong",[t._v("OAuth & Permissions")]),t._v(" をクリックします。\n"),a("img",{attrs:{src:"/assets/images/slack-bot-oauth-and-permissions-introduction-no-check.png",alt:"slack-bot-oauth-and-permissions-introduction-no-check"}})]),t._v(" "),a("li",[a("strong",[t._v("Add an OAuth Scope")]),t._v(" をクリックします。\n"),a("img",{attrs:{src:"/assets/images/slack-bot-scope-add-oauth-click.png",alt:"slack-bot-scope-add-oauth-click"}})]),t._v(" "),a("li",[a("strong",[t._v("commands")]),t._v(", "),a("strong",[t._v("chat:write")]),t._v(", "),a("strong",[t._v("team:read")]),t._v(" を選択します。\n以下のように表示されたら、スコープの設定は完了です。"),a("br"),t._v(" "),a("img",{attrs:{src:"/assets/images/slack-bot-scope-selected.png",alt:"slack-bot-scope-selected"}})])]),t._v(" "),a("h2",{attrs:{id:"interactivity-shortcuts-の-request-url-を設定する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#interactivity-shortcuts-の-request-url-を設定する","aria-hidden":"true"}},[t._v("#")]),t._v(" Interactivity & Shortcuts の Request URL を設定する")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("作成した Slack App の "),a("strong",[t._v("Features")]),t._v(" から "),a("strong",[t._v("Interactivity Shortcuts")]),t._v(" をクリックします。\n"),a("img",{attrs:{src:"/assets/images/slack-bot-interactivity-shortcuts-introduction.png",alt:"slack-bot-interactivity-shortcuts-introduction"}})])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Interactivity")]),t._v(" 右側にあるボタンを On にします。\n"),a("img",{attrs:{src:"/assets/images/slack-bot-interactivity-shortcuts-enable-button.png",alt:"slack-bot-interactivity-shortcuts-enable-button"}})])]),t._v(" "),a("li",[a("p",[t._v("Request URL を以下のように入力してください。")])])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("https://{連携させたい GROWI のドメイン名}/_api/v3/slack-integration/interactions")])]),t._v(" "),a("li",[a("p",[t._v("例 "),a("code",[t._v("https://example.com/_api/v3/slack-integration/interactions")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/assets/images/slack-bot-interactivity-shortcuts-creation.png",alt:"slack-bot-interactivity-shortcuts-creation"}})])])]),t._v(" "),a("ol",[a("li",[t._v("入力が完了したら、"),a("strong",[t._v("Save Changes")]),t._v(" をクリックしてください。")])]),t._v(" "),a("h2",{attrs:{id:"スラッシュコマンドの作成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#スラッシュコマンドの作成","aria-hidden":"true"}},[t._v("#")]),t._v(" スラッシュコマンドの作成")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("作成した Slack App の "),a("strong",[t._v("Features")]),t._v(" から "),a("strong",[t._v("Slash Commands")]),t._v(" をクリックします。\n"),a("img",{attrs:{src:"/assets/images/slash-commands-introduction.png",alt:"slash-commands-introduction"}})])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Create New Command")]),t._v(" をクリックします。\n"),a("img",{attrs:{src:"/assets/images/slash-commands-create-new-command.png",alt:"slash-commands-create-new-command"}})]),t._v(" "),a("ul",[a("li",[t._v("Command に /growi と入力してください。")]),t._v(" "),a("li",[t._v("Request URL には、"),a("code",[t._v("https://example.com/_api/v3/slack-integration/commands")]),t._v(" と入力してください")]),t._v(" "),a("li",[t._v("Short Description も入力必須のため、適当なご説明を入力してください。")]),t._v(" "),a("li",[t._v("Usage Hint に関しては任意なので、適宜入力してください。")]),t._v(" "),a("li",[t._v("Escape channels, users, and links sent to your app に関しては任意なので、適宜入力してください。")]),t._v(" "),a("li",[t._v("入力が完了したら、"),a("strong",[t._v("Save")]),t._v(" をクリックしてください。")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"/assets/images/slash-commands-create.png",alt:"slash-commands-create"}})]),t._v(" "),a("h2",{attrs:{id:"custom-bot-without-proxy-を-slack-のワークスペースへインストールする"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-bot-without-proxy-を-slack-のワークスペースへインストールする","aria-hidden":"true"}},[t._v("#")]),t._v(" Custom bot without proxy を Slack のワークスペースへインストールする")]),t._v(" "),a("ol",[a("li",[t._v("作成した Slack App の "),a("strong",[t._v("Settings")]),t._v(" から "),a("strong",[t._v("Basic Information")]),t._v(" をクリックします。")]),t._v(" "),a("li",[a("strong",[t._v("Install your app")]),t._v(" をクリックします。\n"),a("img",{attrs:{src:"/assets/images/slack-bot-install-your-app-introduction.png",alt:"slack-bot-install-your-app-introduction"}})]),t._v(" "),a("li",[a("strong",[t._v("Install to Workspace")]),t._v(" をクリックします。\n"),a("img",{attrs:{src:"/assets/images/slack-bot-install-to-workspace.png",alt:"slack-bot-install-to-workspace"}})]),t._v(" "),a("li",[t._v("遷移先の画面にて、"),a("strong",[t._v("Allow")]),t._v("をクリックします。\n"),a("img",{attrs:{src:"/assets/images/slack-bot-install-your-app-transition-destination.png",alt:"slack-bot-install-your-app-transition-destination"}})]),t._v(" "),a("li",[t._v("Install your app の右側に 緑色のチェックがつけばワークスペースへのインストール完了です。\n"),a("img",{attrs:{src:"/assets/images/slack-bot-install-your-app-complete.png",alt:"slack-bot-install-your-app-complete"}})]),t._v(" "),a("li",[t._v("GROWI bot を使いたいチャンネルに @example を使用して招待します。\n"),a("img",{attrs:{src:"/assets/images/slack-bot-install-to-workspace-joined-bot.png",alt:"slack-bot-install-to-workspace-joined-bot"}}),t._v(" "),a("img",{attrs:{src:"/assets/images/slack-bot-install-your-app-introduction-to-channel.png",alt:"slack-bot-install-your-app-introduction-to-channel"}})])]),t._v(" "),a("h2",{attrs:{id:"signing-secret-と-bot-user-oauth-token-の設定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signing-secret-と-bot-user-oauth-token-の設定","aria-hidden":"true"}},[t._v("#")]),t._v(" Signing Secret と Bot User OAuth Token の設定")]),t._v(" "),a("p",[t._v("Signing Secret と Bot User OAuth Token の設定を行う前に、作成した Bot でそれぞれの値を確認します。")]),t._v(" "),a("h3",{attrs:{id:"signing-secret-の確認方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signing-secret-の確認方法","aria-hidden":"true"}},[t._v("#")]),t._v(" Signing Secret の確認方法")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("作成した Slack App の "),a("strong",[t._v("Settings")]),t._v(" から "),a("strong",[t._v("Basic Information")]),t._v(" をクリックします。\n"),a("img",{attrs:{src:"/assets/images/slack-bot-basic-information.png",alt:"slack-bot-basic-information"}})])]),t._v(" "),a("li",[a("p",[t._v("App Credentials の "),a("strong",[t._v("Signing Secret")]),t._v(" の "),a("strong",[t._v("show")]),t._v(" ボタンを押して確認します。\n"),a("img",{attrs:{src:"/assets/images/slack-bot-signing-secret.png",alt:"slack-bot-signing-secret"}})])])]),t._v(" "),a("h3",{attrs:{id:"bot-user-oauth-token-の確認方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bot-user-oauth-token-の確認方法","aria-hidden":"true"}},[t._v("#")]),t._v(" Bot User OAuth Token の確認方法")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("作成した Slack App の "),a("strong",[t._v("Settings")]),t._v(" から "),a("strong",[t._v("OAuth and Permissions")]),t._v(" をクリックします。\n"),a("img",{attrs:{src:"/assets/images/slack-bot-oauth-and-permissions-introduction.png",alt:"slack-bot-oauth-and-permissions-introduction"}})])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("OAuth Tokens for Your Team")]),t._v(" の "),a("strong",[t._v("Bot User Oauth Token")]),t._v(" から確認します。\n"),a("img",{attrs:{src:"/assets/images/slack-bot-oauth-and-permissions.png",alt:"slack-bot-oauth-and-permissions"}})])])]),t._v(" "),a("p",[t._v("確認した "),a("strong",[t._v("Signing Secret")]),t._v(" と "),a("strong",[t._v("Bot User OAuth Token")]),t._v(" は 1. 管理画面で入力して設定する方法 と 2. 環境変数で設定する方法の\n2 種類の方法があります。管理画面で直接入力する方が容易です。\nまた、環境変数と管理画面の両方に入力した場合は、管理画面で入力した値が優先されるので、管理画面での入力をおすすめします。")]),t._v(" "),a("ol",[a("li",[t._v("管理画面で直接入力する方法")])]),t._v(" "),a("ul",[a("li",[t._v("管理画面の Slack 連携をクリックし、"),a("strong",[t._v("Signing Secret")]),t._v(" と "),a("strong",[t._v("Bot User OAuth Token")]),t._v(" を入力して\n"),a("strong",[t._v("Update")]),t._v(" ボタンをクリックします。\n"),a("img",{attrs:{src:"/assets/images/slack-bot-register-introduction.png",alt:"slack-bot-register-introduction"}})]),t._v(" "),a("li",[t._v("赤丸で囲った部分に緑色のチェックマークが表示されたら登録完了です。\n"),a("img",{attrs:{src:"/assets/images/slack-bot-register-secrets.png",alt:"slack-bot-register-secrets"}})])]),t._v(" "),a("ol",[a("li",[t._v("環境変数で設定する方法")])]),t._v(" "),a("p",[t._v("環境変数 "),a("code",[t._v("SLACK_SIGNING_SECRET")]),t._v(" と "),a("code",[t._v("SLACK_BOT_TOKEN")]),t._v(" に確認した値を代入してください。")]),t._v(" "),a("h2",{attrs:{id:"custom-bot-without-proxy-の接続テストを実行する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-bot-without-proxy-の接続テストを実行する","aria-hidden":"true"}},[t._v("#")]),t._v(" Custom Bot without proxy の接続テストを実行する")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("「Test connection」をクリックし、GROWI-Bot を招待した Slack チャンネルを入力します。\n"),a("img",{attrs:{src:"/assets/images/slack-bot-test-introduction.png",alt:"slack-bot-test-introduction"}})])]),t._v(" "),a("li",[a("p",[t._v("「Test」 ボタンをクリックします。")])])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("成功の場合"),a("br"),t._v(" "),a("strong",[t._v("Successfully sent to Slack workspace.")]),t._v(" が Logs に表示され、赤丸で囲った部分に緑色のチェックマークが表示されます。GROWI-Bot を招待した Slack チャンネルで確認してみましょう。")]),t._v(" "),a("ul",[a("li",[t._v("GROWI 側\n"),a("img",{attrs:{src:"/assets/images/slack-bot-test-success.png",alt:"slack-bot-test-success"}})]),t._v(" "),a("li",[t._v("Slack 側\n"),a("img",{attrs:{src:"/assets/images/slack-bot-test-success-at-slack-app.png",alt:"slack-bot-test-success-at-slack-app"}})])])]),t._v(" "),a("li",[a("p",[t._v("失敗の場合"),a("br"),t._v(" "),a("RouterLink",{attrs:{to:"/ja/admin-guide/management-cookbook/slack-integration/#接続テスト時のエラーログ"}},[t._v("接続テスト時のエラーログ")]),t._v("を参照してください。")],1)])]),t._v(" "),a("p",[t._v("全ての設定が完了したら "),a("RouterLink",{attrs:{to:"/ja/admin-guide/management-cookbook/slack-integration/#growi-bot-でできること"}},[t._v("GROWI bot でできること")]),t._v("を参照してください。")],1)])},[],!1,null,null,null);s.default=e.exports}}]);